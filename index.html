<!DOCTYPE html>
<html lang="zh-CN">
  <head>
    <script src="https://cdn.jsdelivr.net/gh/suchjs/such@master/dist/such.min.js"></script><link rel="icon" href="./favicon.ico"><title>关于本库 | Suchjs文档</title><meta name="description" content="suchjs的设计指南"><meta charset="utf-8"><meta name="viewport" content="width=device-width,initial-scale=1"><meta name="generator" content="VuePress 2.0.0-beta.23">
    <link rel="preload" href="/vp-suchjs/assets/js/runtime~app.6bc4b30c.js" as="script"><link rel="preload" href="/vp-suchjs/assets/css/styles.e31f8a88.css" as="style"><link rel="preload" href="/vp-suchjs/assets/js/640.6363913a.js" as="script"><link rel="preload" href="/vp-suchjs/assets/js/app.ed51ed80.js" as="script">
    <link rel="stylesheet" href="/vp-suchjs/assets/css/styles.e31f8a88.css">
  </head>
  <body>
    <div id="app"><!--[--><div class="theme-container"><header class="navbar"><div class="toggle-sidebar-button"><svg class="icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div><span><a aria-current="page" href="/vp-suchjs/" class="router-link-active router-link-exact-active"><img class="logo" src="/vp-suchjs/./logo.png" alt="Suchjs文档"><span class="site-name can-hide">Suchjs文档</span></a></span><div class="navbar-links-wrapper" style=""><!--[--><!--]--><nav class="navbar-links can-hide"><!--[--><div class="navbar-links-item"><a class="nav-link external" href="https://www.suchjs.com?locale=zh-CN" rel="noopener noreferrer" target="_blank" aria-label="官网"><!--[--><!--]--> 官网 <span><svg class="icon outbound" xmlns="http://www.w3.org/2000/svg" ariahidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><!--[--><span class="sr-only">open in new window</span><!--]--></span><!--[--><!--]--></a></div><div class="navbar-links-item"><div class="dropdown-wrapper"><button class="dropdown-title" type="button" aria-label="Select language"><span class="title">选择语言</span><span class="arrow down"></span></button><button class="mobile-dropdown-title" type="button" aria-label="Select language"><span class="title">选择语言</span><span class="right arrow"></span></button><ul style="display:none;" class="nav-dropdown"><!--[--><li class="dropdown-item"><a aria-current="page" href="/vp-suchjs/" class="router-link-active router-link-exact-active nav-link" aria-label="简体中文"><!--[--><!--]--> 简体中文 <!--[--><!--]--></a></li><li class="dropdown-item"><a href="/vp-suchjs/en/" class="nav-link" aria-label="English"><!--[--><!--]--> English <!--[--><!--]--></a></li><!--]--></ul></div></div><div class="navbar-links-item"><a class="nav-link external" href="https://github.com/suchjs/such" rel="noopener noreferrer" target="_blank" aria-label="Github"><!--[--><!--]--> Github <span><svg class="icon outbound" xmlns="http://www.w3.org/2000/svg" ariahidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><!--[--><span class="sr-only">open in new window</span><!--]--></span><!--[--><!--]--></a></div><!--]--></nav><!--[--><!--]--><button class="toggle-dark-button" title="toggle dark mode"><svg style="" class="icon" focusable="false" viewBox="0 0 32 32"><path d="M16 12.005a4 4 0 1 1-4 4a4.005 4.005 0 0 1 4-4m0-2a6 6 0 1 0 6 6a6 6 0 0 0-6-6z" fill="currentColor"></path><path d="M5.394 6.813l1.414-1.415l3.506 3.506L8.9 10.318z" fill="currentColor"></path><path d="M2 15.005h5v2H2z" fill="currentColor"></path><path d="M5.394 25.197L8.9 21.691l1.414 1.415l-3.506 3.505z" fill="currentColor"></path><path d="M15 25.005h2v5h-2z" fill="currentColor"></path><path d="M21.687 23.106l1.414-1.415l3.506 3.506l-1.414 1.414z" fill="currentColor"></path><path d="M25 15.005h5v2h-5z" fill="currentColor"></path><path d="M21.687 8.904l3.506-3.506l1.414 1.415l-3.506 3.505z" fill="currentColor"></path><path d="M15 2.005h2v5h-2z" fill="currentColor"></path></svg><svg style="display:none;" class="icon" focusable="false" viewBox="0 0 32 32"><path d="M13.502 5.414a15.075 15.075 0 0 0 11.594 18.194a11.113 11.113 0 0 1-7.975 3.39c-.138 0-.278.005-.418 0a11.094 11.094 0 0 1-3.2-21.584M14.98 3a1.002 1.002 0 0 0-.175.016a13.096 13.096 0 0 0 1.825 25.981c.164.006.328 0 .49 0a13.072 13.072 0 0 0 10.703-5.555a1.01 1.01 0 0 0-.783-1.565A13.08 13.08 0 0 1 15.89 4.38A1.015 1.015 0 0 0 14.98 3z" fill="currentColor"></path></svg></button><!----></div></header><div class="sidebar-mask"></div><aside class="sidebar"><nav class="navbar-links"><!--[--><div class="navbar-links-item"><a class="nav-link external" href="https://www.suchjs.com?locale=zh-CN" rel="noopener noreferrer" target="_blank" aria-label="官网"><!--[--><!--]--> 官网 <span><svg class="icon outbound" xmlns="http://www.w3.org/2000/svg" ariahidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><!--[--><span class="sr-only">open in new window</span><!--]--></span><!--[--><!--]--></a></div><div class="navbar-links-item"><div class="dropdown-wrapper"><button class="dropdown-title" type="button" aria-label="Select language"><span class="title">选择语言</span><span class="arrow down"></span></button><button class="mobile-dropdown-title" type="button" aria-label="Select language"><span class="title">选择语言</span><span class="right arrow"></span></button><ul style="display:none;" class="nav-dropdown"><!--[--><li class="dropdown-item"><a aria-current="page" href="/vp-suchjs/" class="router-link-active router-link-exact-active nav-link" aria-label="简体中文"><!--[--><!--]--> 简体中文 <!--[--><!--]--></a></li><li class="dropdown-item"><a href="/vp-suchjs/en/" class="nav-link" aria-label="English"><!--[--><!--]--> English <!--[--><!--]--></a></li><!--]--></ul></div></div><div class="navbar-links-item"><a class="nav-link external" href="https://github.com/suchjs/such" rel="noopener noreferrer" target="_blank" aria-label="Github"><!--[--><!--]--> Github <span><svg class="icon outbound" xmlns="http://www.w3.org/2000/svg" ariahidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><!--[--><span class="sr-only">open in new window</span><!--]--></span><!--[--><!--]--></a></div><!--]--></nav><!--[--><!--]--><ul class="sidebar-links"><!--[--><!--[--><a aria-current="page" href="/vp-suchjs/" class="router-link-active router-link-exact-active nav-link sidebar-heading sidebar-item active" aria-label="关于本库"><!--[--><!--]--> 关于本库 <!--[--><!--]--></a><ul class=""><li><!--[--><a aria-current="page" href="/vp-suchjs/#设计目标" class="router-link-active router-link-exact-active nav-link sidebar-item" aria-label="设计目标"><!--[--><!--]--> 设计目标 <!--[--><!--]--></a><!----><!--]--></li><li><!--[--><a aria-current="page" href="/vp-suchjs/#数据属性" class="router-link-active router-link-exact-active nav-link sidebar-item" aria-label="数据属性"><!--[--><!--]--> 数据属性 <!--[--><!--]--></a><!----><!--]--></li><li><!--[--><a aria-current="page" href="/vp-suchjs/#数据模拟示例" class="router-link-active router-link-exact-active nav-link sidebar-item" aria-label="数据模拟示例"><!--[--><!--]--> 数据模拟示例 <!--[--><!--]--></a><!----><!--]--></li></ul><!--]--><!--[--><a href="/vp-suchjs/installation.html" class="nav-link sidebar-heading sidebar-item" aria-label="安装使用"><!--[--><!--]--> 安装使用 <!--[--><!--]--></a><!----><!--]--><!--[--><a href="/vp-suchjs/types/README.md" class="nav-link sidebar-heading sidebar-item" aria-label="内置类型"><!--[--><!--]--> 内置类型 <!--[--><!--]--></a><ul class=""><li><!--[--><a href="/vp-suchjs/types/string.html" class="nav-link sidebar-item" aria-label=":string"><!--[--><!--]--> :string <!--[--><!--]--></a><!----><!--]--></li><li><!--[--><a href="/vp-suchjs/types/number.html" class="nav-link sidebar-item" aria-label=":number"><!--[--><!--]--> :number <!--[--><!--]--></a><!----><!--]--></li><li><!--[--><a href="/vp-suchjs/types/date.html" class="nav-link sidebar-item" aria-label=":date"><!--[--><!--]--> :date <!--[--><!--]--></a><!----><!--]--></li><li><!--[--><a href="/vp-suchjs/types/regexp.html" class="nav-link sidebar-item" aria-label=":regexp"><!--[--><!--]--> :regexp <!--[--><!--]--></a><!----><!--]--></li><li><!--[--><a href="/vp-suchjs/types/increment.html" class="nav-link sidebar-item" aria-label=":increment"><!--[--><!--]--> :increment <!--[--><!--]--></a><!----><!--]--></li><li><!--[--><a href="/vp-suchjs/types/ref.html" class="nav-link sidebar-item" aria-label=":ref"><!--[--><!--]--> :ref <!--[--><!--]--></a><!----><!--]--></li><li><!--[--><a href="/vp-suchjs/types/dict.html" class="nav-link sidebar-item" aria-label=":dict"><!--[--><!--]--> :dict <!--[--><!--]--></a><!----><!--]--></li><li><!--[--><a href="/vp-suchjs/types/cascader.html" class="nav-link sidebar-item" aria-label=":cascader"><!--[--><!--]--> :cascader <!--[--><!--]--></a><!----><!--]--></li><li><!--[--><a href="/vp-suchjs/types/template.html" class="nav-link sidebar-item" aria-label="template"><!--[--><!--]--> template <!--[--><!--]--></a><!----><!--]--></li><li><!--[--><a href="/vp-suchjs/types/enum.html" class="nav-link sidebar-item" aria-label="enum"><!--[--><!--]--> enum <!--[--><!--]--></a><!----><!--]--></li></ul><!--]--><!--[--><a href="/vp-suchjs/extTypes.html" class="nav-link sidebar-heading sidebar-item" aria-label="扩展类型"><!--[--><!--]--> 扩展类型 <!--[--><!--]--></a><!----><!--]--><!--[--><a href="/vp-suchjs/field.html" class="nav-link sidebar-heading sidebar-item" aria-label="字段配置"><!--[--><!--]--> 字段配置 <!--[--><!--]--></a><!----><!--]--><!--[--><a href="/vp-suchjs/api.html" class="nav-link sidebar-heading sidebar-item" aria-label="接口API"><!--[--><!--]--> 接口API <!--[--><!--]--></a><!----><!--]--><!--[--><a href="/vp-suchjs/mock.html" class="nav-link sidebar-heading sidebar-item" aria-label="Mock接口"><!--[--><!--]--> Mock接口 <!--[--><!--]--></a><!----><!--]--><!--[--><a href="/vp-suchjs/playground.html" class="nav-link sidebar-heading sidebar-item" aria-label="运行示例"><!--[--><!--]--> 运行示例 <!--[--><!--]--></a><!----><!--]--><!--]--></ul><!--[--><!--]--></aside><!--[--><main class="page"><!--[--><!--]--><div class="theme-default-content"><!--[--><h3 id="设计目标" tabindex="-1"><a class="header-anchor" href="#设计目标" aria-hidden="true">#</a> 设计目标</h3><p>在前端数据模拟库上，已经有像 <code>fakerjs</code>、<code>mockjs</code> 这种功能比较全的库，但每个库都有自己的设计风格和出发点。<code>suchjs</code> 的设计目标主要有如下两个方面：</p><ul><li><p>易扩展 —— 对于数据模拟来说，良好的扩展性是保持库的生命力的一个重要特性，所以<code>suchjs</code>在这方面做了尽可能多的设计和工作。</p></li><li><p>易使用 —— 这其实是易扩展带来的一个好处之一，另外 <code>suchjs</code> 采用声明式的写法，以多种<code>数据属性</code>配置组合的方式来声明数据，这种方式更便于理解。</p></li></ul><h3 id="数据属性" tabindex="-1"><a class="header-anchor" href="#数据属性" aria-hidden="true">#</a> 数据属性</h3><p>每种数据类型都有其具备的自身特性，比如数字，会有大小、会有格式；又比如字符串会有长度，会有字符语言的限制，或者说 unicode 码点的限制。<code>suchjs</code> 把这些通用特性提取出来，以数据属性的方式书写在类型描述中。也因此一个模拟数据可能是多个这样的数据属性的组合，多个数据属性通过间隔符 <code>:</code> 隔离开来（注：为有时候方便书写，第一个类型属性和紧接着的属性的分隔符可以省略）。<code>suchjs</code> 里内置的数据属性包含以下这些：</p><ul><li><p>类型 —— 首先需要书写数据的类型，这些类型可以是 <code>suchjs</code> 内置的，也可以是你自己定义的。默认的内置类型有字符串 <code>:string</code>，数字 <code>:number</code>，日期 <code>:date</code>，正则 <code>:regexp</code>，引用 <code>:ref</code>，自增 <code>:increment</code>，还支持词典 <code>:dict</code>，级联菜单 <code>:cascader</code>，不过这两个类型在 Nodejs 环境和浏览器环境使用上有稍许区别，在具体类型的条目上会有相关的说明。此外还包括内置的扩展类型如 <code>:bool</code>，<code>:int</code>，<code>:url</code>，<code>:email</code> 等，内置扩展类型可以也可以在源代码 <code>src/extends/recommend.ts</code> 查看。</p></li><li><p>长度 —— 长度属性以 <code>{min[,max]}</code> 的格式书写，它通常对于字符串和数组格式数据比较常用，如字符串长度为 3 则用 <code>{3}</code> 表示，长度为 10 到 20 则表示为 <code>{10,20}</code></p></li><li><p>大小 —— 大小属性以 <code>[min,max]</code> 的格式书写，通常表示一个数值范围。对于数字，就表示数字的最小值和最大值，如数字大小为 10 到 20，则用 <code>[10,20]</code> 表示，如果表示一个固定数字，比如数字 3，则用 <code>[3,3]</code> 表示，如果不是有其它的数据属性配置，则更应该直接用数字 3 直接书写。对于字符串，则通常表示字符的码点范围，比如大写字母的码点范围为 65-90，则可以书写为<code>[65,90]</code>，如果有多个分组，则可以用分组的书写语法，比如同时表示大写字母和小写字母，可以书写为<code>[65-90,97-122]</code>。对于日期，则表示一个日期范围，比如从 2012 到 2022，则表示为 <code>[2012,2022]</code>，<code>suchjs</code>内置了更强大的类似 php <code>strtotime</code> 日志格式的支持，比如以当前时间前后 5 年的范围，则可以表示为 <code>[&#39;-5 years&#39;,&#39;+5 years&#39;]</code>。</p></li><li><p>格式化 —— 格式化属性以 <code>%</code> 后面带上 <code>format</code> 格式的方式书写。格式化通常对于数字类型、日期类型比较有用，对于数字类型，<code>suchjs</code> 内置了支持 c 风格 <code>printf</code> 的书写格式，比如 <code>%.2f</code> 表示将数字转成 2 位小数点的浮点数（数字类型默认就是小数部分生成<code>Math.random</code>浮点数的格式）。</p></li><li><p>路径 —— 路径属性以 <code>&amp;</code> 后带上地址的形式书写。路径属性对引用类型、词典类型等比较有用。对于引用类型，路径地址代表着模拟对象的数据路径，注意路径对应的引用字段必须出现在该引用类型之前，否则获取到的数据将是<code>undefined</code>。<code>{firstName: &#39;你&#39;, lastName: &#39;好&#39;, fullName: &#39;:ref:&amp;./firstName,./lastName&#39;}</code>，这样 <code>fullName</code> 将得到 <code>[&#39;你&#39;,&#39;好&#39;]</code>的一个数组。对于词典类型，则表示词典文件的路径地址 <code>:dict:&amp;&lt;dataDir&gt;/dict.txt</code>，则表示从数据目录下的 <code>dict.txt</code> 文件获取数据。</p></li><li><p>正则 —— 匹配正则以 <code>/</code> 开头，后接正则表达式字符串。正则的属性配置主要针对正则类型。正则类型是一个很强大的类型，基于它能生成基本你想要的格式的所有类型。</p></li><li><p>函数调用 —— 以上的数据属性不同的数据类型可能并不是都需要，所以每个类型可能都只支持特定的几种数据属性的写法，但函数调用和下面的配置数据属性则是所有类型都支持解析的。函数属性以 <code>@</code> 开头，后面加上函数调用，要使用的函数可以通过<code>Such.assign</code>静态方法全局注入，对于数据类型自身存在的方法，则可以直接调用。比如对于字符串类型：<code>:string:[65,90]:{3}:@repeat(3)|slice(-5)</code>，则表示获取到 3 个大写字母字符串后、重复 3 遍，然后取最后倒数的 5 个字符。</p></li><li><p>参数配置 —— 参数配置和函数调用一样，也是类型默认都支持解析并获取到的数据属性。它通常用来为一些已定义类型提供外部数据的注入。参数配置以 <code>#[key=value,flag]</code>的格式书写。比如自增 id 类型，我们想配置它的开始值和步阶，则可以这样配置 <code>:increment:#[start=1,step=2]</code>。</p></li></ul><h3 id="数据模拟示例" tabindex="-1"><a class="header-anchor" href="#数据模拟示例" aria-hidden="true">#</a> 数据模拟示例</h3><p>有了对上面数据属性基础的了解，现在我们就可以来通过这些数据属性的组合，来模拟一些数据了。</p><ul><li><p><code>:string:[65,90]:{3,10}</code> =&gt; 输出一个字符串，字符串的码点范围为 65 到 90&lt;亦即大写字母&gt;，长度为 3 到 10 个，会生成形如 <code>DUFCD</code>，<code>KASGDS</code> 这样的字符串。</p></li><li><p><code>:date:[&#39;-1 year&#39;,&#39;+1 year&#39;]:%yyyy-mm-dd HH\:MM\:ss</code> =&gt; 输出当前日期前后一年的日期，并格式化为年月日时分秒的形式。</p></li><li><p><code>:number:[1,100]:%.2f</code> =&gt; 输出一个 1 到 100 内的数字，并且格式化为保留两个小数点。</p></li><li><p><code>:regexp:/[a-z]{3,5}/i</code> =&gt; 输出一个 3 到 5 个英文字母的字符串。</p></li></ul><p>更多的数据类型或者类型自定义方式请继续查看相关章节。</p><!--]--></div><footer class="page-meta"><div class="meta-item edit-link"><a class="nav-link external meta-item-label" href="https://github.com/suchjs/vp-suchjs/edit/main/README.md" rel="noopener noreferrer" target="_blank" aria-label="编辑此页"><!--[--><!--]--> 编辑此页 <span><svg class="icon outbound" xmlns="http://www.w3.org/2000/svg" ariahidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><!--[--><span class="sr-only">open in new window</span><!--]--></span><!--[--><!--]--></a></div><!----><!----></footer><nav class="page-nav"><p class="inner"><!----><span class="next"><a href="/vp-suchjs/installation.html" class="nav-link" aria-label="安装使用"><!--[--><!--]--> 安装使用 <!--[--><!--]--></a> → </span></p></nav><!--[--><!--]--></main><!--]--></div><!----><!--]--></div>
    <script src="/vp-suchjs/assets/js/runtime~app.6bc4b30c.js" defer></script><script src="/vp-suchjs/assets/js/640.6363913a.js" defer></script><script src="/vp-suchjs/assets/js/app.ed51ed80.js" defer></script>
  </body>
</html>
